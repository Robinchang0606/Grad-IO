# 上市公司网络指标构建工具

## 项目概述

本项目为上市公司关联交易网络分析提供了完整的解决方案，能够构建两个核心网络指标：

1. **指标1**: 上市公司关联公司间的直接投入金额加总
2. **指标2**: 企业实际拥有的关联交易公司数量

## 文件说明

- `network_indicators_construction.py` - 完整版工具（需要pandas, numpy, networkx）
- `simple_network_indicators.py` - 简化版工具（仅使用Python标准库）
- `data_structure_guide.md` - 详细的数据结构和方法说明
- `README_网络指标构建.md` - 本说明文档

## 快速开始

### 1. 运行示例
```bash
python3 simple_network_indicators.py
```

### 2. 使用自己的数据

#### 准备数据文件

**公司信息文件 (companies.csv):**
```csv
company_id,company_name,is_listed,industry,total_assets
A001,科技公司A,1,科技业,1000000
A002,制造公司B,0,制造业,500000
```

**交易信息文件 (transactions.csv):**
```csv
transaction_id,from_company,to_company,transaction_amount,transaction_type,year
1,A001,A002,1000000,投资,2023
2,A001,A003,800000,采购,2023
```

#### 修改代码使用真实数据
```python
# 替换 create_sample_data() 调用为：
builder.load_data('companies.csv', 'transactions.csv')
```

## 指标详解

### 指标1: 直接投入金额加总

**计算方法:**
- **对外直接投资** = 该公司作为投资方的投资总额
- **接受直接投资** = 该公司作为被投资方接受的投资总额  
- **总直接投入** = 对外投资 + 接受投资

**输出字段:**
- `outgoing_investment`: 对外直接投资
- `incoming_investment`: 接受直接投资
- `total_direct_investment`: 总直接投入
- `investment_transactions_count`: 投资交易笔数
- `investment_intensity`: 投资强度（标准化）

### 指标2: 关联交易公司数量

**计算方法:**
- **直接关联** = 有直接交易关系的公司数量
- **间接关联** = 通过直接关联公司能到达的二度连接公司数量
- **总网络规模** = 直接关联 + 间接关联

**输出字段:**
- `direct_partners_count`: 直接关联公司数量
- `indirect_partners_count`: 间接关联公司数量
- `total_network_size`: 总网络规模
- `investment_partners`: 投资伙伴数量
- `trading_partners`: 交易伙伴数量
- `service_partners`: 服务伙伴数量
- `degree_centrality`: 度中心性
- `network_density`: 网络密度

## 示例结果分析

根据运行结果，我们可以看到：

### 指标1分析
- **公司A1**: 总直接投入115万元，主要为对外投资（2笔投资交易）
- **公司B1**: 总直接投入120万元，投资强度最高（标准化值1.0）

### 指标2分析
- **公司A1**: 网络规模7（5个直接+2个间接关联），度中心性0.714，网络连接度较高
- **公司B1**: 网络规模7（3个直接+4个间接关联），度中心性0.429，间接连接更多

### 综合分析
- **公司A1**: 网络影响力评分0.898，在直接连接和中心性方面表现突出
- **公司B1**: 网络影响力评分0.829，在投资金额方面表现最佳

## 输出文件

程序运行后会生成三个CSV文件：

1. `indicator_1_direct_investment.csv` - 指标1详细结果
2. `indicator_2_network_size.csv` - 指标2详细结果  
3. `combined_network_analysis.csv` - 综合分析结果

## 应用场景

1. **风险评估**: 通过网络指标识别关联交易风险较高的上市公司
2. **投资分析**: 评估上市公司的外部网络资源和影响力
3. **监管合规**: 监测上市公司关联交易的规模和复杂度
4. **学术研究**: 分析企业网络结构对公司绩效的影响

## 扩展功能建议

1. **时间序列分析**: 按年度计算指标变化趋势
2. **行业对比**: 同行业公司网络指标比较
3. **可视化**: 绘制关联交易网络图
4. **风险预警**: 基于网络指标设置风险阈值
5. **回归分析**: 研究网络指标与公司绩效的关系

## 技术特点

- **灵活性**: 支持多种数据格式输入
- **可扩展性**: 易于添加新的网络指标
- **标准化**: 提供标准化评分便于比较
- **完整性**: 包含直接和间接网络连接分析
- **实用性**: 生成易于分析的CSV输出文件

## 注意事项

1. **数据质量**: 确保输入数据的准确性和完整性
2. **计算复杂度**: 大规模数据可能需要优化算法
3. **结果解释**: 需要结合行业背景和公司规模解读指标
4. **动态更新**: 建议定期更新数据以反映最新的网络状况

这个工具为上市公司网络指标构建提供了完整的解决方案，可以根据具体需求进行调整和扩展。